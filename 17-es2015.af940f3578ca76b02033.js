(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{IKMc:function(e,t,n){"use strict";n.r(t),n.d(t,"AddanuncioPageModule",(function(){return N}));var o=n("ofXK"),i=n("3Pt+"),a=n("TEn/"),r=n("tyNb"),c=n("mrSG"),s=n("nYR2"),b=n("fXoL"),l=n("OqH9"),u=n("Vaw3");const g=["ImageAnuncio"];function d(e,t){if(1&e&&(b.Lb(0,"img",17),b.Zb(1,"async")),2&e){const e=b.Yb();b.ec("src",b.ac(1,1,e.urlImage),b.lc)}}function p(e,t){1&e&&b.Lb(0,"img",18)}function m(e,t){if(1&e&&(b.Lb(0,"ion-progress-bar",19),b.Zb(1,"async")),2&e){const e=b.Yb();b.ec("value",b.ac(1,1,e.uploadPercent))}}function f(e,t){if(1&e&&(b.Nb(0,"small",20),b.pc(1),b.Mb()),2&e){const e=b.Yb();b.Ab(1),b.qc(e.getError("titulo"))}}function h(e,t){if(1&e&&(b.Nb(0,"small",20),b.pc(1),b.Mb()),2&e){const e=b.Yb();b.Ab(1),b.qc(e.getError("texto"))}}const v=[{path:"",component:(()=>{class e{constructor(e,t,n,o,i,a){this.route=e,this.fb=t,this.anuncioservise=n,this.toastController=o,this.router=i,this.storage=a,this.fechacre=new Date,this.codvet=Number(this.route.snapshot.paramMap.get("codvet"))}ngOnInit(){this.formInit()}formInit(){this.formulario=this.fb.group({titulo:["",[i.j.required,i.j.maxLength(100)]],texto:["",[i.j.required,i.j.maxLength(500)]]})}agregar(){let e=this.formulario.value;e.fechacre=this.fechacre,e.imagen=this.imagenAnuncio.nativeElement.value," "==e.imagen&&(e.imagen="https://firebasestorage.googleapis.com/v0/b/talleriii-4de86.appspot.com/o/anuncios%2Fdefault.jpg?alt=media&token=02e4e452-7184-476b-ae52-95dacd3e0525"),this.anuncioservise.addanuncio(e).then(e=>this.anuncioservise.addvetanuncio({codvet:this.codvet,codanuncio:e[0].codanuncio}).then(e=>{this.mensaje(e.mensaje),this.router.navigate([`/tabs/misanuncios/${this.codvet}`])})),this.formulario.reset()}mensaje(e){return Object(c.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({message:e,duration:2e3})).present()}))}uploadFile(e){if(e.target.files[0].size/1024>3e3)this.mensaje("Imagen Demaciado grande");else{const t=Math.random().toString(36).substring(2),n=e.target.files[0],o=`/veterinarias/img_${t}`,i=this.storage.ref(o),a=this.storage.upload(o,n);this.uploadPercent=a.percentageChanges(),a.snapshotChanges().pipe(Object(s.a)(()=>this.urlImage=i.getDownloadURL())).subscribe()}}getError(e){let t;return this.formulario.get(e).hasError("required")?t="campo requerido":this.formulario.get(e).hasError("maxlength")&&("titulo"==e?t="el titulo no debe pasar de 100 caracteres":"texto"==e&&(t="el texto no debe pasar de 500 caracteres")),t}}return e.\u0275fac=function(t){return new(t||e)(b.Kb(r.a),b.Kb(i.a),b.Kb(l.a),b.Kb(a.gb),b.Kb(r.g),b.Kb(u.a))},e.\u0275cmp=b.Eb({type:e,selectors:[["app-addanuncio"]],viewQuery:function(e,t){var n;1&e&&b.uc(g,!0),2&e&&b.ic(n=b.Wb())&&(t.imagenAnuncio=n.first)},decls:40,vars:13,consts:[[3,"defaultHref"],["fixed",""],["size","12","size-lg","6"],[1,"container-imagen"],["alt","usuario",3,"src",4,"ngIf"],["src","https://firebasestorage.googleapis.com/v0/b/talleriii-4de86.appspot.com/o/anuncios%2Fdefault.jpg?alt=media&token=02e4e452-7184-476b-ae52-95dacd3e0525","alt","imagen veterinaria",4,"ngIf"],[3,"value",4,"ngIf"],[1,"fileUpload","botonImagen"],["type","file","size","3000","accept",".png, .jpg",1,"upload",3,"change"],[3,"formGroup"],["position","floating"],["formControlName","titulo"],["class","mensajeError",4,"ngIf"],["formControlName","texto"],["shape","round","size","block",3,"disabled","click"],["type","hidden",3,"value"],["ImageAnuncio",""],["alt","usuario",3,"src"],["src","https://firebasestorage.googleapis.com/v0/b/talleriii-4de86.appspot.com/o/anuncios%2Fdefault.jpg?alt=media&token=02e4e452-7184-476b-ae52-95dacd3e0525","alt","imagen veterinaria"],[3,"value"],[1,"mensajeError"]],template:function(e,t){1&e&&(b.Nb(0,"ion-header"),b.Nb(1,"ion-toolbar"),b.Nb(2,"ion-buttons"),b.Lb(3,"ion-back-button",0),b.Nb(4,"ion-title"),b.pc(5,"Adicionar anuncio"),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(6,"ion-content"),b.Nb(7,"ion-grid",1),b.Nb(8,"ion-row"),b.Nb(9,"ion-col",2),b.Nb(10,"div",3),b.nc(11,d,2,3,"img",4),b.Zb(12,"async"),b.nc(13,p,1,0,"img",5),b.nc(14,m,2,3,"ion-progress-bar",6),b.Nb(15,"div",7),b.Nb(16,"span"),b.pc(17,"Subir Imagen"),b.Mb(),b.Nb(18,"input",8),b.Vb("change",(function(e){return t.uploadFile(e)})),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(19,"ion-col",2),b.Nb(20,"form",9),b.Nb(21,"ion-list"),b.Nb(22,"ion-list-header"),b.Nb(23,"h3"),b.pc(24,"Adicionar Nuevo Anuncio"),b.Mb(),b.Mb(),b.Nb(25,"ion-item"),b.Nb(26,"ion-label",10),b.pc(27,"Titulo"),b.Mb(),b.Lb(28,"ion-input",11),b.Mb(),b.nc(29,f,2,1,"small",12),b.Nb(30,"ion-item"),b.Nb(31,"ion-label",10),b.pc(32,"Detalle"),b.Mb(),b.Lb(33,"ion-textarea",13),b.Mb(),b.nc(34,h,2,1,"small",12),b.Mb(),b.Nb(35,"ion-button",14),b.Vb("click",(function(){return t.agregar()})),b.pc(36," Crear "),b.Mb(),b.Mb(),b.Lb(37,"input",15,16),b.Zb(39,"async"),b.Mb(),b.Mb(),b.Mb(),b.Mb()),2&e&&(b.Ab(3),b.gc("defaultHref","/tabs/misanuncios/",t.codvet,""),b.Ab(8),b.ec("ngIf",b.ac(12,9,t.urlImage)),b.Ab(2),b.ec("ngIf",!t.urlImage),b.Ab(1),b.ec("ngIf",t.uploadPercent),b.Ab(6),b.ec("formGroup",t.formulario),b.Ab(9),b.ec("ngIf",t.formulario.get("titulo").touched),b.Ab(5),b.ec("ngIf",t.formulario.get("texto").touched),b.Ab(1),b.ec("disabled",t.formulario.invalid),b.Ab(2),b.ec("value",b.ac(39,11,t.urlImage)))},directives:[a.w,a.Y,a.i,a.f,a.g,a.W,a.r,a.v,a.J,a.q,o.m,i.k,i.h,i.c,a.E,a.F,a.z,a.D,a.y,a.fb,i.g,i.b,a.U,a.h,a.H],pipes:[o.b],styles:["*[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.container-imagen[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column}.container-imagen[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:100%;height:350px;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center;border:2px solid #f3f2f2;padding:2px}.fileUpload[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin:10px}.fileUpload[_ngcontent-%COMP%]   input.upload[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0;filter:alpha(opacity=0)}.botonImagen[_ngcontent-%COMP%]{padding:10px;background-color:var(--ion-color-tertiary);border-radius:5px}.botonImagen[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:500}.mensajeError[_ngcontent-%COMP%]{color:red;padding:10px;border-radius:10px}"]}),e})()}];let M=(()=>{class e{}return e.\u0275mod=b.Ib({type:e}),e.\u0275inj=b.Hb({factory:function(t){return new(t||e)},imports:[[r.i.forChild(v)],r.i]}),e})(),N=(()=>{class e{}return e.\u0275mod=b.Ib({type:e}),e.\u0275inj=b.Hb({factory:function(t){return new(t||e)},imports:[[o.c,i.d,a.Z,M,i.i]]}),e})()}}]);