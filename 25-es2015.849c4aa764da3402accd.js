(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{SFYB:function(n,o,e){"use strict";e.r(o),e.d(o,"ModanuncioPageModule",(function(){return C}));var t=e("ofXK"),i=e("3Pt+"),a=e("TEn/"),c=e("tyNb"),r=e("mrSG"),s=e("nYR2"),b=e("fXoL"),u=e("OqH9"),l=e("Vaw3"),d=e("x6dk");const g=["ImageAnuncio"];function f(n,o){if(1&n&&b.Lb(0,"ion-back-button",13),2&n){const n=b.Yb();b.gc("defaultHref","/tabs/misanuncios/",n.codvet,"")}}function m(n,o){if(1&n){const n=b.Ob();b.Nb(0,"ion-toggle",14),b.Vb("ionChange",(function(o){b.kc(n);const e=b.Yb();return e.cambiarEstado(o,e.codanuncio)})),b.Mb()}if(2&n){const n=b.Yb();b.ec("checked",n.estado)}}function p(n,o){if(1&n&&b.Lb(0,"img",15),2&n){const n=b.Yb();b.ec("src",n.imagen,b.lc)}}function h(n,o){if(1&n&&(b.Lb(0,"img",16),b.Zb(1,"async")),2&n){const n=b.Yb();b.ec("src",b.ac(1,1,n.urlImage),b.lc)}}function M(n,o){if(1&n&&(b.Lb(0,"ion-progress-bar",17),b.Zb(1,"async")),2&n){const n=b.Yb();b.ec("value",b.ac(1,1,n.uploadPercent))}}function v(n,o){if(1&n&&(b.Nb(0,"small",24),b.pc(1),b.Mb()),2&n){const n=b.Yb(2);b.Ab(1),b.qc(n.getError("titulo"))}}function I(n,o){if(1&n&&(b.Nb(0,"small",24),b.pc(1),b.Mb()),2&n){const n=b.Yb(2);b.Ab(1),b.qc(n.getError("texto"))}}function N(n,o){if(1&n){const n=b.Ob();b.Nb(0,"form",18),b.Nb(1,"ion-list"),b.Nb(2,"ion-list-header"),b.Nb(3,"h3"),b.pc(4,"Modificar Anuncio"),b.Mb(),b.Mb(),b.Nb(5,"ion-item"),b.Nb(6,"ion-label",19),b.pc(7,"Titulo"),b.Mb(),b.Lb(8,"ion-input",20),b.Mb(),b.nc(9,v,2,1,"small",21),b.Nb(10,"ion-item"),b.Nb(11,"ion-label",19),b.pc(12,"Detalle"),b.Mb(),b.Lb(13,"ion-textarea",22),b.Mb(),b.nc(14,I,2,1,"small",21),b.Lb(15,"br"),b.Nb(16,"ion-button",23),b.Vb("click",(function(){return b.kc(n),b.Yb().actualizar()})),b.pc(17," Actualizar "),b.Mb(),b.Mb(),b.Mb()}if(2&n){const n=b.Yb();b.ec("formGroup",n.formulario),b.Ab(9),b.ec("ngIf",n.formulario.get("titulo").touched),b.Ab(5),b.ec("ngIf",n.formulario.get("texto").touched),b.Ab(2),b.ec("disabled",n.formulario.invalid)}}const y=[{path:"",component:(()=>{class n{constructor(n,o,e,t,i,a){this.route=n,this.anuncio=o,this.toastController=e,this.fb=t,this.router=i,this.storage=a,this.fechamod=new Date,this.codanuncio=Number(this.route.snapshot.paramMap.get("codanuncio"))}ionViewWillEnter(){this.formInit()}formInit(){return Object(r.a)(this,void 0,void 0,(function*(){const n=yield this.anuncio.getAnuncioByCodanuncio(this.codanuncio);this.codvet=n[0].codvet,this.estado=n[0].estado,this.imagen=n[0].imganuncio,this.formulario=this.fb.group({titulo:[n[0].titulo,[i.j.required,i.j.maxLength(100)]],texto:[n[0].texto,[i.j.required,i.j.maxLength(500)]]})}))}cambiarEstado(n,o){this.anuncio.CambiarEsatdoAnuncio({codanuncio:o,estado:n.detail.checked}).then(n=>{this.Mensaje(n.mensaje)})}actualizar(){let n=this.formulario.value;n.codanuncio=this.codanuncio,n.fechamod=this.fechamod,n.imagen=this.imagenAnuncio.nativeElement.value,""==n.imagen&&(n.imagen=this.imagen),this.anuncio.actualizaranuncio(n).then(n=>{this.Mensaje(n.mensaje),this.router.navigate([`/tabs/misanuncios/${this.codvet}`])})}Mensaje(n){return Object(r.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({message:n,duration:2e3})).present()}))}uploadFile(n){if(n.target.files[0].size/1024>3e3)this.Mensaje("Imagen Demaciado grande");else{const o=Math.random().toString(36).substring(2),e=n.target.files[0],t=`/anuncios/img_${o}`,i=this.storage.ref(t),a=this.storage.upload(t,e);this.uploadPercent=a.percentageChanges(),a.snapshotChanges().pipe(Object(s.a)(()=>this.urlImage=i.getDownloadURL())).subscribe()}}getError(n){let o;return this.formulario.get(n).hasError("required")?o="campo requerido":this.formulario.get(n).hasError("maxlength")&&("titulo"==n?o="el titulo no debe pasar de 100 caracteres":"texto"==n&&(o="el texto no debe pasar de 500 caracteres")),o}}return n.\u0275fac=function(o){return new(o||n)(b.Kb(c.a),b.Kb(u.a),b.Kb(a.gb),b.Kb(i.a),b.Kb(c.g),b.Kb(l.a))},n.\u0275cmp=b.Eb({type:n,selectors:[["app-modanuncio"]],viewQuery:function(n,o){var e;1&n&&b.uc(g,!0),2&n&&b.ic(e=b.Wb())&&(o.imagenAnuncio=e.first)},decls:25,vars:11,consts:[[3,"defaultHref",4,"ngIf"],["slot","end",3,"checked","ionChange",4,"ngIf"],["fixed",""],["size","12","size-lg","6"],[1,"container-imagen"],["appImagen","","alt","imagen de anuncio",3,"src",4,"ngIf"],["alt","usuario",3,"src",4,"ngIf"],[3,"value",4,"ngIf"],[1,"fileUpload","botonImagen"],["type","file","size","3000","accept",".png, .jpg",1,"upload",3,"change"],[3,"formGroup",4,"ngIf"],["type","hidden",3,"value"],["ImageAnuncio",""],[3,"defaultHref"],["slot","end",3,"checked","ionChange"],["appImagen","","alt","imagen de anuncio",3,"src"],["alt","usuario",3,"src"],[3,"value"],[3,"formGroup"],["position","floating"],["formControlName","titulo"],["class","mensajeError",4,"ngIf"],["formControlName","texto","autoGrow","true"],["shape","round","size","block",3,"disabled","click"],[1,"mensajeError"]],template:function(n,o){1&n&&(b.Nb(0,"ion-header"),b.Nb(1,"ion-toolbar"),b.Nb(2,"ion-buttons"),b.nc(3,f,1,1,"ion-back-button",0),b.Nb(4,"ion-title"),b.pc(5,"Modificar anuncio"),b.Mb(),b.nc(6,m,1,1,"ion-toggle",1),b.Mb(),b.Mb(),b.Mb(),b.Nb(7,"ion-content"),b.Nb(8,"ion-grid",2),b.Nb(9,"ion-row"),b.Nb(10,"ion-col",3),b.Nb(11,"div",4),b.nc(12,p,1,1,"img",5),b.nc(13,h,2,3,"img",6),b.Zb(14,"async"),b.nc(15,M,2,3,"ion-progress-bar",7),b.Nb(16,"div",8),b.Nb(17,"span"),b.pc(18,"Modificar Imagen"),b.Mb(),b.Nb(19,"input",9),b.Vb("change",(function(n){return o.uploadFile(n)})),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(20,"ion-col",3),b.nc(21,N,18,4,"form",10),b.Lb(22,"input",11,12),b.Zb(24,"async"),b.Mb(),b.Mb(),b.Mb(),b.Mb()),2&n&&(b.Ab(3),b.ec("ngIf",o.codvet),b.Ab(3),b.ec("ngIf",o.codvet),b.Ab(6),b.ec("ngIf",!o.urlImage),b.Ab(1),b.ec("ngIf",b.ac(14,7,o.urlImage)),b.Ab(2),b.ec("ngIf",o.uploadPercent),b.Ab(6),b.ec("ngIf",o.codvet),b.Ab(1),b.ec("value",b.ac(24,9,o.urlImage)))},directives:[a.w,a.Y,a.i,t.m,a.W,a.r,a.v,a.J,a.q,a.f,a.g,a.X,a.c,d.a,a.H,i.k,i.h,i.c,a.E,a.F,a.z,a.D,a.y,a.fb,i.g,i.b,a.U,a.h],pipes:[t.b],styles:["*[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.container-imagen[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column}.container-imagen[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:100%;height:350px;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center;border:2px solid #f3f2f2;padding:2px}.fileUpload[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin:10px}.fileUpload[_ngcontent-%COMP%]   input.upload[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0;filter:alpha(opacity=0)}.botonImagen[_ngcontent-%COMP%]{padding:10px;background-color:var(--ion-color-tertiary);border-radius:5px}.botonImagen[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:500}.mensajeError[_ngcontent-%COMP%]{color:red;padding:10px;border-radius:10px}"]}),n})()}];let j=(()=>{class n{}return n.\u0275mod=b.Ib({type:n}),n.\u0275inj=b.Hb({factory:function(o){return new(o||n)},imports:[[c.i.forChild(y)],c.i]}),n})();var x=e("ChPG");let C=(()=>{class n{}return n.\u0275mod=b.Ib({type:n}),n.\u0275inj=b.Hb({factory:function(o){return new(o||n)},imports:[[t.c,i.d,a.Z,j,i.i,x.a]]}),n})()}}]);