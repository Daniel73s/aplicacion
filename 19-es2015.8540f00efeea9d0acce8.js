(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{Z5ZR:function(e,o,r){"use strict";r.r(o),r.d(o,"CrearcuentaPageModule",(function(){return A}));var n=r("ofXK"),t=r("3Pt+"),i=r("TEn/"),a=r("tyNb"),c=r("mrSG"),s=r("3HD+"),l=r("fXoL"),b=r("mRib"),m=r("FHRc"),u=r("z3On");function p(e,o){if(1&e&&(l.Nb(0,"small",18),l.pc(1),l.Mb()),2&e){const e=l.Yb();l.Ab(1),l.qc(e.getError("nombre"))}}function d(e,o){if(1&e&&(l.Nb(0,"small",18),l.pc(1),l.Mb()),2&e){const e=l.Yb();l.Ab(1),l.qc(e.getError("ap"))}}function g(e,o){if(1&e&&(l.Nb(0,"small",18),l.pc(1),l.Mb()),2&e){const e=l.Yb();l.Ab(1),l.qc(e.getError("am"))}}function f(e,o){if(1&e&&(l.Nb(0,"small",18),l.pc(1),l.Mb()),2&e){const e=l.Yb();l.Ab(1),l.qc(e.getError("celular"))}}function h(e,o){if(1&e&&(l.Nb(0,"small",18),l.pc(1),l.Mb()),2&e){const e=l.Yb();l.Ab(1),l.qc(e.getError("direccion"))}}function M(e,o){if(1&e&&(l.Nb(0,"small",18),l.pc(1),l.Mb()),2&e){const e=l.Yb();l.Ab(1),l.qc(e.getError("fechanac"))}}function N(e,o){if(1&e&&(l.Nb(0,"small",18),l.pc(1),l.Mb()),2&e){const e=l.Yb();l.Ab(1),l.qc(e.getError("clave"))}}function $(e,o){if(1&e&&(l.Nb(0,"small",18),l.pc(1),l.Mb()),2&e){const e=l.Yb();l.Ab(1),l.qc(e.getError("repclave"))}}const v=[{path:"",component:(()=>{class e{constructor(e,o,r,n,t,i){this.fb=e,this.usu=o,this.router=r,this.auth=n,this.datalocal=t,this.toastController=i,this.regex="[A-Za-z ]*",this.regexclave="/^(?=.*[a-z])(?=.*[A-Z])(?=.*d)(?=.*[$@$!%*?&#.$($)$-$_])[A-Za-zd$@$!%*?&#.$($)$-$_]/"}ngOnInit(){this.formInit(),console.log()}formInit(){this.formulario=this.fb.group({nombre:["",[t.j.required,t.j.maxLength(35),t.j.pattern(this.regex)]],ap:["",[t.j.required,t.j.maxLength(35),t.j.pattern(this.regex)]],am:["",[t.j.required,t.j.maxLength(35),t.j.pattern(this.regex)]],celular:["",[t.j.required,t.j.pattern(/^([0-9])*$/),t.j.maxLength(8),t.j.minLength(8)]],direccion:["",[t.j.required,t.j.maxLength(250)]],fechanac:["",[t.j.required]],clave:["",[t.j.required,t.j.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&#.$($)$-$_])[A-Za-z\d$@$!%*?&#.$($)$-$_]/),t.j.minLength(8)]],repclave:["",[t.j.required,t.j.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&#.$($)$-$_])[A-Za-z\d$@$!%*?&#.$($)$-$_]/),t.j.minLength(8)]]},{validators:s.a.passwordMatchValidator})}submit(){const e=new Date,o=this.formulario.value;o.foto="https://firebasestorage.googleapis.com/v0/b/talleriii-4de86.appspot.com/o/fotosPerfil%2Fuser.png?alt=media&token=dd40b091-627f-4fc0-90d3-a433d777d66b",this.usu.crearPersona(o).then(o=>{const r=o[0].codper,n=`user${r}`,t=this.formulario.value.clave;return this.usu.crearCuenta({user:n,clave:t,codper:r,codrol:"3",fechacre:e}).then(()=>{this.iniciarSesion({username:n,clave:t})})})}iniciarSesion(e){this.auth.IniciarSesion(e).then(e=>{this.datalocal.guardarToken(e.token),this.router.navigate(["/tabs/home"])}).catch(e=>{this.mensaje("ocuerrio un error al iniciar sesion")})}getError(e){let o;return this.formulario.get(e).hasError("required")?o="campo requerido":this.formulario.get(e).hasError("minlength")?"clave"==e||"repclave"==e?o="la clave debe tener como minimo 8 caracteres":"celular"==e&&(o="el numero debe tener 8 digitos"):this.formulario.get(e).hasError("pattern")?"nombre"==e||"ap"==e||"am"==e?o="no se permiten numeros":"clave"==e||"repclave"==e?o="La contrase\xf1a debe tener mayusculas minusculas digitos y caracteres especiales":"celular"==e&&(o="solo se aceptan digitos"):this.formulario.get(e).hasError("NoPassswordMatch")?o="La clave no coincide":this.formulario.get(e).hasError("maxlength")&&("nombre"==e||"ap"==e||"am"==e?o="supero el numero de caracteres validos":"celular"==e?o="solo se permiten 8 digitos":"direccion"==e&&(o="solo se permiten 250 caracteres")),o}mensaje(e){return Object(c.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({message:e,duration:2e3,cssClass:"animated bounceInLeft",position:"top"})).present()}))}}return e.\u0275fac=function(o){return new(o||e)(l.Kb(t.a),l.Kb(b.a),l.Kb(a.g),l.Kb(m.a),l.Kb(u.a),l.Kb(i.gb))},e.\u0275cmp=l.Eb({type:e,selectors:[["app-crearcuenta"]],decls:62,vars:10,consts:[[2,"--background","#fff !important"],[1,"login-section","ion-padding"],[1,"heading","ion-padding"],[3,"formGroup","ngSubmit"],["name","man",2,"margin-right","10px"],["position","floating"],["formControlName","nombre"],["class","mensajeError",4,"ngIf"],["formControlName","ap"],["formControlName","am"],["formControlName","celular"],["formControlName","direccion"],["displayFormat","MMM DD, YYYY","formControlName","fechanac","monthShortNames","enero, febrero, marzo, abril, mayo, junio, julio, agosto, septiembre, octubre, noviembre, deciembre"],["name","person",2,"margin-right","10px"],["readonly","","color","danger","value","El usuario se creara Automaticamente"],["type","Password","formControlName","clave"],["type","Password","formControlName","repclave"],["type","submit",3,"disabled"],[1,"mensajeError"]],template:function(e,o){1&e&&(l.Nb(0,"ion-content",0),l.Nb(1,"div",1),l.Nb(2,"div",2),l.Nb(3,"h2"),l.pc(4,"Crear Nueva Cuenta"),l.Mb(),l.Nb(5,"p"),l.pc(6,"Empezemos!!!"),l.Mb(),l.Mb(),l.Nb(7,"form",3),l.Vb("ngSubmit",(function(){return o.submit()})),l.Nb(8,"ion-list"),l.Nb(9,"ion-list-header"),l.Lb(10,"ion-icon",4),l.pc(11," Datos Personales "),l.Mb(),l.Nb(12,"ion-item"),l.Nb(13,"ion-label",5),l.pc(14,"Nombre"),l.Mb(),l.Lb(15,"ion-input",6),l.Mb(),l.nc(16,p,2,1,"small",7),l.Nb(17,"ion-item"),l.Nb(18,"ion-label",5),l.pc(19,"Apellido paterno"),l.Mb(),l.Lb(20,"ion-input",8),l.Mb(),l.nc(21,d,2,1,"small",7),l.Nb(22,"ion-item"),l.Nb(23,"ion-label",5),l.pc(24,"Apellido Materno"),l.Mb(),l.Lb(25,"ion-input",9),l.Mb(),l.nc(26,g,2,1,"small",7),l.Nb(27,"ion-item"),l.Nb(28,"ion-label",5),l.pc(29,"Telefono/Celular"),l.Mb(),l.Lb(30,"ion-input",10),l.Mb(),l.nc(31,f,2,1,"small",7),l.Nb(32,"ion-item"),l.Nb(33,"ion-label",5),l.pc(34,"Direccion"),l.Mb(),l.Lb(35,"ion-input",11),l.Mb(),l.nc(36,h,2,1,"small",7),l.Nb(37,"ion-item"),l.Nb(38,"ion-label",5),l.pc(39,"Fecha de Nacimiento"),l.Mb(),l.Lb(40,"ion-datetime",12),l.Mb(),l.nc(41,M,2,1,"small",7),l.Mb(),l.Nb(42,"ion-list"),l.Nb(43,"ion-list-header"),l.Lb(44,"ion-icon",13),l.pc(45," Usuario "),l.Mb(),l.Nb(46,"ion-item"),l.Nb(47,"ion-label",5),l.pc(48,"Usuario"),l.Mb(),l.Lb(49,"ion-input",14),l.Mb(),l.Nb(50,"ion-item"),l.Nb(51,"ion-label",5),l.pc(52,"Password"),l.Mb(),l.Lb(53,"ion-input",15),l.Mb(),l.nc(54,N,2,1,"small",7),l.Nb(55,"ion-item"),l.Nb(56,"ion-label",5),l.pc(57,"Confirmar Password"),l.Mb(),l.Lb(58,"ion-input",16),l.Mb(),l.nc(59,$,2,1,"small",7),l.Mb(),l.Nb(60,"ion-button",17),l.pc(61,"Registrarse"),l.Mb(),l.Mb(),l.Mb(),l.Mb()),2&e&&(l.Ab(7),l.ec("formGroup",o.formulario),l.Ab(9),l.ec("ngIf",o.formulario.get("nombre").touched),l.Ab(5),l.ec("ngIf",o.formulario.get("ap").touched),l.Ab(5),l.ec("ngIf",o.formulario.get("am").touched),l.Ab(5),l.ec("ngIf",o.formulario.get("celular").touched),l.Ab(5),l.ec("ngIf",o.formulario.get("direccion").touched),l.Ab(5),l.ec("ngIf",o.formulario.get("fechanac").touched),l.Ab(13),l.ec("ngIf",o.formulario.get("clave").touched),l.Ab(5),l.ec("ngIf",o.formulario.get("repclave").touched),l.Ab(1),l.ec("disabled",o.formulario.invalid))},directives:[i.r,t.k,t.h,t.c,i.E,i.F,i.x,i.z,i.D,i.y,i.fb,t.g,t.b,n.m,i.s,i.eb,i.h],styles:[".danger[_ngcontent-%COMP%]{color:red}.login-section[_ngcontent-%COMP%]{height:90vh;width:100%;max-width:500px;background:#fff;right:0;left:0;bottom:0;position:relative;margin:auto;border-top-left-radius:46px;border-top-right-radius:46px}.heading[_ngcontent-%COMP%]{margin-top:20px}.heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:bolder}.heading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:20px;font-size:1rem;color:#7b7b7b}.mensajeError[_ngcontent-%COMP%]{color:red;padding:10px;border-radius:10px}"]}),e})()}];let j=(()=>{class e{}return e.\u0275mod=l.Ib({type:e}),e.\u0275inj=l.Hb({factory:function(o){return new(o||e)},imports:[[a.i.forChild(v)],a.i]}),e})(),A=(()=>{class e{}return e.\u0275mod=l.Ib({type:e}),e.\u0275inj=l.Hb({factory:function(o){return new(o||e)},imports:[[n.c,t.d,i.Z,t.i,j]]}),e})()}}]);