function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,n,i){return n&&_defineProperties(e.prototype,n),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{LAaf:function(e,n,i){"use strict";i.r(n),i.d(n,"ModveterinariaPageModule",(function(){return O}));var o=i("ofXK"),r=i("3Pt+"),t=i("TEn/"),a=i("tyNb"),c=i("mrSG"),s=i("nYR2"),l=i("fXoL"),b=i("Y3v9"),f=i("Vaw3"),u=i("x6dk"),g=["Imagevet"];function m(e,n){1&e&&l.Lb(0,"ion-back-button",10)}function d(e,n){if(1&e){var i=l.Ob();l.Nb(0,"ion-toggle",11),l.Vb("ionChange",(function(e){l.kc(i);var n=l.Yb();return n.abrirCerrar(e,n.codvet)})),l.Mb()}if(2&e){var o=l.Yb();l.ec("checked",o.ac)}}function p(e,n){1&e&&(l.Nb(0,"ion-row"),l.Nb(1,"ion-col"),l.Nb(2,"div",12),l.Lb(3,"ion-spinner",13),l.pc(4," Cargando... "),l.Mb(),l.Mb(),l.Mb())}function h(e,n){if(1&e&&(l.Lb(0,"img",20),l.Zb(1,"async")),2&e){var i=l.Yb(2);l.ec("src",l.ac(1,1,i.urlImage),l.lc)}}function v(e,n){if(1&e&&l.Lb(0,"img",21),2&e){var i=l.Yb(2);l.ec("src",i.imagen,l.lc)}}function M(e,n){if(1&e&&(l.Lb(0,"ion-progress-bar",22),l.Zb(1,"async")),2&e){var i=l.Yb(2);l.ec("value",l.ac(1,1,i.uploadPercent))}}function N(e,n){if(1&e){var i=l.Ob();l.Nb(0,"div",14),l.nc(1,h,2,3,"img",15),l.Zb(2,"async"),l.nc(3,v,1,1,"img",16),l.nc(4,M,2,3,"ion-progress-bar",17),l.Nb(5,"div",18),l.Nb(6,"span"),l.pc(7,"Modificar Imagen"),l.Mb(),l.Nb(8,"input",19),l.Vb("change",(function(e){return l.kc(i),l.Yb().uploadFile(e)})),l.Mb(),l.Mb(),l.Mb()}if(2&e){var o=l.Yb();l.Ab(1),l.ec("ngIf",l.ac(2,3,o.urlImage)),l.Ab(2),l.ec("ngIf",!o.urlImage),l.Ab(1),l.ec("ngIf",o.uploadPercent)}}function I(e,n){if(1&e&&(l.Nb(0,"small",33),l.pc(1),l.Mb()),2&e){var i=l.Yb(2);l.Ab(1),l.qc(i.getError("nombre"))}}function C(e,n){if(1&e&&(l.Nb(0,"small",33),l.pc(1),l.Mb()),2&e){var i=l.Yb(2);l.Ab(1),l.qc(i.getError("descripcion"))}}function y(e,n){if(1&e&&(l.Nb(0,"small",33),l.pc(1),l.Mb()),2&e){var i=l.Yb(2);l.Ab(1),l.qc(i.getError("direccion"))}}function k(e,n){if(1&e&&(l.Nb(0,"small",33),l.pc(1),l.Mb()),2&e){var i=l.Yb(2);l.Ab(1),l.qc(i.getError("horarioatencion"))}}function j(e,n){if(1&e&&(l.Nb(0,"small",33),l.pc(1),l.Mb()),2&e){var i=l.Yb(2);l.Ab(1),l.qc(i.getError("telefono"))}}function w(e,n){if(1&e&&(l.Nb(0,"small",33),l.pc(1),l.Mb()),2&e){var i=l.Yb(2);l.Ab(1),l.qc(i.getError("atenciondom"))}}function x(e,n){if(1&e){var i=l.Ob();l.Nb(0,"form",23),l.Nb(1,"ion-list"),l.Nb(2,"ion-list-header"),l.Nb(3,"h3"),l.pc(4,"Modificar Veterinaria"),l.Mb(),l.Mb(),l.Nb(5,"ion-item"),l.Nb(6,"ion-label",24),l.pc(7,"Nombre"),l.Mb(),l.Lb(8,"ion-input",25),l.Mb(),l.nc(9,I,2,1,"small",26),l.Nb(10,"ion-item"),l.Nb(11,"ion-label",24),l.pc(12,"Descripcion"),l.Mb(),l.Lb(13,"ion-textarea",27),l.Mb(),l.nc(14,C,2,1,"small",26),l.Nb(15,"ion-item"),l.Nb(16,"ion-label",24),l.pc(17,"Direccion"),l.Mb(),l.Lb(18,"ion-textarea",28),l.Mb(),l.nc(19,y,2,1,"small",26),l.Nb(20,"ion-item"),l.Nb(21,"ion-label",24),l.pc(22,"Horario de atencion"),l.Mb(),l.Lb(23,"ion-textarea",29),l.Mb(),l.nc(24,k,2,1,"small",26),l.Nb(25,"ion-item"),l.Nb(26,"ion-label",24),l.pc(27,"Telefono/Celular"),l.Mb(),l.Lb(28,"ion-input",30),l.Mb(),l.nc(29,j,2,1,"small",26),l.Nb(30,"ion-item"),l.Nb(31,"ion-label"),l.pc(32,"Atencion a Domicilio"),l.Mb(),l.Lb(33,"ion-toggle",31),l.Mb(),l.nc(34,w,2,1,"small",26),l.Lb(35,"br"),l.Nb(36,"ion-button",32),l.Vb("click",(function(){return l.kc(i),l.Yb().modificar()})),l.pc(37," Guardar Cambios "),l.Mb(),l.Mb(),l.Mb()}if(2&e){var o=l.Yb();l.ec("formGroup",o.formulario),l.Ab(9),l.ec("ngIf",o.formulario.get("nombre").touched),l.Ab(5),l.ec("ngIf",o.formulario.get("descripcion").touched),l.Ab(5),l.ec("ngIf",o.formulario.get("direccion").touched),l.Ab(5),l.ec("ngIf",o.formulario.get("horarioatencion").touched),l.Ab(5),l.ec("ngIf",o.formulario.get("telefono").touched),l.Ab(5),l.ec("ngIf",o.formulario.get("atenciondom").touched),l.Ab(2),l.ec("disabled",o.formulario.invalid)}}var A,L,P,E=[{path:"",component:(A=function(){function e(n,i,o,r,t,a){_classCallCheck(this,e),this.route=n,this.vetService=i,this.fb=o,this.toastController=r,this.router=t,this.storage=a,this.codvet=Number(this.route.snapshot.paramMap.get("codvet"))}return _createClass(e,[{key:"ionViewWillEnter",value:function(){this.getInfoVet(this.codvet),this.formInit()}},{key:"formInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.vetService.getVetById(this.codvet);case 2:n=e.sent,this.ac=n[0].ac,this.imagen=n[0].imagen,this.formulario=this.fb.group({nombre:[n[0].nombre,[r.j.maxLength(30),r.j.required]],descripcion:[n[0].descripcion,[r.j.required,r.j.maxLength(250)]],direccion:[n[0].direccion,[r.j.maxLength(150),r.j.required]],horarioatencion:[n[0].horarioatencion,[r.j.required]],telefono:[n[0].telefono,[r.j.required,r.j.pattern(/^([0-9])*$/),r.j.maxLength(8),r.j.minLength(8)]],atenciondom:[n[0].atenciondom]});case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getInfoVet",value:function(e){var n=this;this.vetService.getVetById(e).then((function(e){n.veterinaria=e[0]}))}},{key:"abrirCerrar",value:function(e,n){var i=this;this.vetService.abrirCerrarVet({codvet:n,ac:e.detail.checked}).then((function(e){i.Mensaje(e.Mensaje)}))}},{key:"modificar",value:function(){var e=this,n=this.formulario.value,i=new Date;n.codvet=this.codvet,n.fechamod=i,n.imagen=this.fotovet.nativeElement.value,""==n.imagen&&(n.imagen=this.imagen),this.vetService.modvetapp(n).then((function(n){e.Mensaje(n.mensaje),e.router.navigate(["/tabs/login"])})).catch((function(n){e.Mensaje("ocurrio un error inesperado")}))}},{key:"Mensaje",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.toastController.create({message:e,duration:2e3});case 2:n.sent.present();case 3:case"end":return n.stop()}}),n,this)})))}},{key:"uploadFile",value:function(e){var n=this;if(e.target.files[0].size/1024>3e3)this.Mensaje("Imagen Demaciado grande");else{var i=Math.random().toString(36).substring(2),o=e.target.files[0],r="/veterinarias/img_".concat(i),t=this.storage.ref(r),a=this.storage.upload(r,o);this.uploadPercent=a.percentageChanges(),a.snapshotChanges().pipe(Object(s.a)((function(){return n.urlImage=t.getDownloadURL()}))).subscribe()}}},{key:"getError",value:function(e){var n;return this.formulario.get(e).hasError("required")?n="campo requerido":this.formulario.get(e).hasError("maxlength")?"nombre"==e?n="solo se permiten 30 caracteres como maximo":"direccion"==e?n="solo se permiten 150 caracteres":"descripcion"==e?n="solo se permiten 250 caracteres":"telefono"==e&&(n="solo se permiten 8 digitos"):this.formulario.get(e).hasError("minlength")?n="faltan digitos":this.formulario.get(e).hasError("pattern")&&(n="numero no valido"),n}}]),e}(),A.\u0275fac=function(e){return new(e||A)(l.Kb(a.a),l.Kb(b.a),l.Kb(r.a),l.Kb(t.gb),l.Kb(a.g),l.Kb(f.a))},A.\u0275cmp=l.Eb({type:A,selectors:[["app-modveterinaria"]],viewQuery:function(e,n){var i;1&e&&l.uc(g,!0),2&e&&l.ic(i=l.Wb())&&(n.fotovet=i.first)},decls:18,vars:8,consts:[["defaultHref","/tabs/login","icon","close-circle",4,"ngIf"],["slot","end",3,"checked","ionChange",4,"ngIf"],["fixed",""],[4,"ngIf"],["size","12","size-lg","6"],["class","container-imagen",4,"ngIf"],["size-sm","12","size-lg","6"],[3,"formGroup",4,"ngIf"],["type","hidden",3,"value"],["Imagevet",""],["defaultHref","/tabs/login","icon","close-circle"],["slot","end",3,"checked","ionChange"],[1,"loading"],["name","crescent"],[1,"container-imagen"],["alt","usuario",3,"src",4,"ngIf"],["appImagen","","alt","imagen veterinaria",3,"src",4,"ngIf"],[3,"value",4,"ngIf"],[1,"fileUpload","botonImagen"],["type","file","size","3000","accept",".png, .jpg",1,"upload",3,"change"],["alt","usuario",3,"src"],["appImagen","","alt","imagen veterinaria",3,"src"],[3,"value"],[3,"formGroup"],["position","floating"],["formControlName","nombre"],["class","mensajeError",4,"ngIf"],["formControlName","descripcion"],["formControlName","direccion"],["formControlName","horarioatencion"],["formControlName","telefono"],["slot","end","formControlName","atenciondom"],["color","primary","size","block",3,"disabled","click"],[1,"mensajeError"]],template:function(e,n){1&e&&(l.Nb(0,"ion-header"),l.Nb(1,"ion-toolbar"),l.Nb(2,"ion-buttons"),l.nc(3,m,1,0,"ion-back-button",0),l.Nb(4,"ion-title"),l.pc(5,"Modificar veterinaria"),l.Mb(),l.nc(6,d,1,1,"ion-toggle",1),l.Mb(),l.Mb(),l.Mb(),l.Nb(7,"ion-content"),l.Nb(8,"ion-grid",2),l.nc(9,p,5,0,"ion-row",3),l.Nb(10,"ion-row"),l.Nb(11,"ion-col",4),l.nc(12,N,9,5,"div",5),l.Mb(),l.Nb(13,"ion-col",6),l.nc(14,x,38,8,"form",7),l.Lb(15,"input",8,9),l.Zb(17,"async"),l.Mb(),l.Mb(),l.Mb(),l.Mb()),2&e&&(l.Ab(3),l.ec("ngIf",n.veterinaria),l.Ab(3),l.ec("ngIf",n.imagen),l.Ab(3),l.ec("ngIf",!n.veterinaria),l.Ab(3),l.ec("ngIf",n.imagen),l.Ab(2),l.ec("ngIf",n.imagen),l.Ab(1),l.ec("value",l.ac(17,6,n.urlImage)))},directives:[t.w,t.Y,t.i,o.m,t.W,t.r,t.v,t.J,t.q,t.f,t.g,t.X,t.c,t.Q,u.a,t.H,r.k,r.h,r.c,t.E,t.F,t.z,t.D,t.y,t.fb,r.g,r.b,t.U,t.h],pipes:[o.b],styles:["*[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.container-imagen[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column}.fileUpload[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin:10px}.fileUpload[_ngcontent-%COMP%]   input.upload[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0;filter:alpha(opacity=0)}.botonImagen[_ngcontent-%COMP%]{padding:10px;background-color:var(--ion-color-tertiary);border-radius:5px}.botonImagen[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:500}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;height:300px}.mensajeError[_ngcontent-%COMP%]{color:red;padding:10px;border-radius:10px}"]}),A)}],_=((L=function e(){_classCallCheck(this,e)}).\u0275mod=l.Ib({type:L}),L.\u0275inj=l.Hb({factory:function(e){return new(e||L)},imports:[[a.i.forChild(E)],a.i]}),L),Y=i("ChPG"),O=((P=function e(){_classCallCheck(this,e)}).\u0275mod=l.Ib({type:P}),P.\u0275inj=l.Hb({factory:function(e){return new(e||P)},imports:[[o.c,r.d,t.Z,f.b,_,r.i,Y.a]]}),P)}}]);