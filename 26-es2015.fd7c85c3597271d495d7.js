(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{LAaf:function(e,n,o){"use strict";o.r(n),o.d(n,"ModveterinariaPageModule",(function(){return k}));var i=o("ofXK"),t=o("3Pt+"),r=o("TEn/"),a=o("tyNb"),c=o("mrSG"),s=o("nYR2"),b=o("fXoL"),l=o("Y3v9"),g=o("Vaw3"),m=o("x6dk");const f=["Imagevet"];function d(e,n){1&e&&b.Lb(0,"ion-back-button",10)}function u(e,n){if(1&e){const e=b.Ob();b.Nb(0,"ion-toggle",11),b.Vb("ionChange",(function(n){b.kc(e);const o=b.Yb();return o.abrirCerrar(n,o.codvet)})),b.Mb()}if(2&e){const e=b.Yb();b.ec("checked",e.ac)}}function p(e,n){1&e&&(b.Nb(0,"ion-row"),b.Nb(1,"ion-col"),b.Nb(2,"div",12),b.Lb(3,"ion-spinner",13),b.pc(4," Cargando... "),b.Mb(),b.Mb(),b.Mb())}function h(e,n){if(1&e&&(b.Lb(0,"img",20),b.Zb(1,"async")),2&e){const e=b.Yb(2);b.ec("src",b.ac(1,1,e.urlImage),b.lc)}}function v(e,n){if(1&e&&b.Lb(0,"img",21),2&e){const e=b.Yb(2);b.ec("src",e.imagen,b.lc)}}function M(e,n){if(1&e&&(b.Lb(0,"ion-progress-bar",22),b.Zb(1,"async")),2&e){const e=b.Yb(2);b.ec("value",b.ac(1,1,e.uploadPercent))}}function N(e,n){if(1&e){const e=b.Ob();b.Nb(0,"div",14),b.nc(1,h,2,3,"img",15),b.Zb(2,"async"),b.nc(3,v,1,1,"img",16),b.nc(4,M,2,3,"ion-progress-bar",17),b.Nb(5,"div",18),b.Nb(6,"span"),b.pc(7,"Modificar Imagen"),b.Mb(),b.Nb(8,"input",19),b.Vb("change",(function(n){return b.kc(e),b.Yb().uploadFile(n)})),b.Mb(),b.Mb(),b.Mb()}if(2&e){const e=b.Yb();b.Ab(1),b.ec("ngIf",b.ac(2,3,e.urlImage)),b.Ab(2),b.ec("ngIf",!e.urlImage),b.Ab(1),b.ec("ngIf",e.uploadPercent)}}function I(e,n){if(1&e&&(b.Nb(0,"small",33),b.pc(1),b.Mb()),2&e){const e=b.Yb(2);b.Ab(1),b.qc(e.getError("nombre"))}}function C(e,n){if(1&e&&(b.Nb(0,"small",33),b.pc(1),b.Mb()),2&e){const e=b.Yb(2);b.Ab(1),b.qc(e.getError("descripcion"))}}function j(e,n){if(1&e&&(b.Nb(0,"small",33),b.pc(1),b.Mb()),2&e){const e=b.Yb(2);b.Ab(1),b.qc(e.getError("direccion"))}}function y(e,n){if(1&e&&(b.Nb(0,"small",33),b.pc(1),b.Mb()),2&e){const e=b.Yb(2);b.Ab(1),b.qc(e.getError("horarioatencion"))}}function A(e,n){if(1&e&&(b.Nb(0,"small",33),b.pc(1),b.Mb()),2&e){const e=b.Yb(2);b.Ab(1),b.qc(e.getError("telefono"))}}function x(e,n){if(1&e&&(b.Nb(0,"small",33),b.pc(1),b.Mb()),2&e){const e=b.Yb(2);b.Ab(1),b.qc(e.getError("atenciondom"))}}function w(e,n){if(1&e){const e=b.Ob();b.Nb(0,"form",23),b.Nb(1,"ion-list"),b.Nb(2,"ion-list-header"),b.Nb(3,"h3"),b.pc(4,"Modificar Veterinaria"),b.Mb(),b.Mb(),b.Nb(5,"ion-item"),b.Nb(6,"ion-label",24),b.pc(7,"Nombre"),b.Mb(),b.Lb(8,"ion-input",25),b.Mb(),b.nc(9,I,2,1,"small",26),b.Nb(10,"ion-item"),b.Nb(11,"ion-label",24),b.pc(12,"Descripcion"),b.Mb(),b.Lb(13,"ion-textarea",27),b.Mb(),b.nc(14,C,2,1,"small",26),b.Nb(15,"ion-item"),b.Nb(16,"ion-label",24),b.pc(17,"Direccion"),b.Mb(),b.Lb(18,"ion-textarea",28),b.Mb(),b.nc(19,j,2,1,"small",26),b.Nb(20,"ion-item"),b.Nb(21,"ion-label",24),b.pc(22,"Horario de atencion"),b.Mb(),b.Lb(23,"ion-textarea",29),b.Mb(),b.nc(24,y,2,1,"small",26),b.Nb(25,"ion-item"),b.Nb(26,"ion-label",24),b.pc(27,"Telefono/Celular"),b.Mb(),b.Lb(28,"ion-input",30),b.Mb(),b.nc(29,A,2,1,"small",26),b.Nb(30,"ion-item"),b.Nb(31,"ion-label"),b.pc(32,"Atencion a Domicilio"),b.Mb(),b.Lb(33,"ion-toggle",31),b.Mb(),b.nc(34,x,2,1,"small",26),b.Lb(35,"br"),b.Nb(36,"ion-button",32),b.Vb("click",(function(){return b.kc(e),b.Yb().modificar()})),b.pc(37," Guardar Cambios "),b.Mb(),b.Mb(),b.Mb()}if(2&e){const e=b.Yb();b.ec("formGroup",e.formulario),b.Ab(9),b.ec("ngIf",e.formulario.get("nombre").touched),b.Ab(5),b.ec("ngIf",e.formulario.get("descripcion").touched),b.Ab(5),b.ec("ngIf",e.formulario.get("direccion").touched),b.Ab(5),b.ec("ngIf",e.formulario.get("horarioatencion").touched),b.Ab(5),b.ec("ngIf",e.formulario.get("telefono").touched),b.Ab(5),b.ec("ngIf",e.formulario.get("atenciondom").touched),b.Ab(2),b.ec("disabled",e.formulario.invalid)}}const L=[{path:"",component:(()=>{class e{constructor(e,n,o,i,t,r){this.route=e,this.vetService=n,this.fb=o,this.toastController=i,this.router=t,this.storage=r,this.codvet=Number(this.route.snapshot.paramMap.get("codvet"))}ionViewWillEnter(){this.getInfoVet(this.codvet),this.formInit()}formInit(){return Object(c.a)(this,void 0,void 0,(function*(){const e=yield this.vetService.getVetById(this.codvet);this.ac=e[0].ac,this.imagen=e[0].imagen,this.formulario=this.fb.group({nombre:[e[0].nombre,[t.j.maxLength(30),t.j.required]],descripcion:[e[0].descripcion,[t.j.required,t.j.maxLength(250)]],direccion:[e[0].direccion,[t.j.maxLength(150),t.j.required]],horarioatencion:[e[0].horarioatencion,[t.j.required]],telefono:[e[0].telefono,[t.j.required,t.j.pattern(/^([0-9])*$/),t.j.maxLength(8),t.j.minLength(8)]],atenciondom:[e[0].atenciondom]})}))}getInfoVet(e){this.vetService.getVetById(e).then(e=>{this.veterinaria=e[0]})}abrirCerrar(e,n){this.vetService.abrirCerrarVet({codvet:n,ac:e.detail.checked}).then(e=>{this.Mensaje(e.Mensaje)})}modificar(){let e=this.formulario.value;const n=new Date;e.codvet=this.codvet,e.fechamod=n,e.imagen=this.fotovet.nativeElement.value,""==e.imagen&&(e.imagen=this.imagen),this.vetService.modvetapp(e).then(e=>{this.Mensaje(e.mensaje),this.router.navigate(["/tabs/login"])}).catch(e=>{this.Mensaje("ocurrio un error inesperado")})}Mensaje(e){return Object(c.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({message:e,duration:2e3})).present()}))}uploadFile(e){if(e.target.files[0].size/1024>3e3)this.Mensaje("Imagen Demaciado grande");else{const n=Math.random().toString(36).substring(2),o=e.target.files[0],i=`/veterinarias/img_${n}`,t=this.storage.ref(i),r=this.storage.upload(i,o);this.uploadPercent=r.percentageChanges(),r.snapshotChanges().pipe(Object(s.a)(()=>this.urlImage=t.getDownloadURL())).subscribe()}}getError(e){let n;return this.formulario.get(e).hasError("required")?n="campo requerido":this.formulario.get(e).hasError("maxlength")?"nombre"==e?n="solo se permiten 30 caracteres como maximo":"direccion"==e?n="solo se permiten 150 caracteres":"descripcion"==e?n="solo se permiten 250 caracteres":"telefono"==e&&(n="solo se permiten 8 digitos"):this.formulario.get(e).hasError("minlength")?n="faltan digitos":this.formulario.get(e).hasError("pattern")&&(n="numero no valido"),n}}return e.\u0275fac=function(n){return new(n||e)(b.Kb(a.a),b.Kb(l.a),b.Kb(t.a),b.Kb(r.gb),b.Kb(a.g),b.Kb(g.a))},e.\u0275cmp=b.Eb({type:e,selectors:[["app-modveterinaria"]],viewQuery:function(e,n){var o;1&e&&b.uc(f,!0),2&e&&b.ic(o=b.Wb())&&(n.fotovet=o.first)},decls:18,vars:8,consts:[["defaultHref","/tabs/login","icon","close-circle",4,"ngIf"],["slot","end",3,"checked","ionChange",4,"ngIf"],["fixed",""],[4,"ngIf"],["size","12","size-lg","6"],["class","container-imagen",4,"ngIf"],["size-sm","12","size-lg","6"],[3,"formGroup",4,"ngIf"],["type","hidden",3,"value"],["Imagevet",""],["defaultHref","/tabs/login","icon","close-circle"],["slot","end",3,"checked","ionChange"],[1,"loading"],["name","crescent"],[1,"container-imagen"],["alt","usuario",3,"src",4,"ngIf"],["appImagen","","alt","imagen veterinaria",3,"src",4,"ngIf"],[3,"value",4,"ngIf"],[1,"fileUpload","botonImagen"],["type","file","size","3000","accept",".png, .jpg",1,"upload",3,"change"],["alt","usuario",3,"src"],["appImagen","","alt","imagen veterinaria",3,"src"],[3,"value"],[3,"formGroup"],["position","floating"],["formControlName","nombre"],["class","mensajeError",4,"ngIf"],["formControlName","descripcion"],["formControlName","direccion"],["formControlName","horarioatencion"],["formControlName","telefono"],["slot","end","formControlName","atenciondom"],["color","primary","size","block",3,"disabled","click"],[1,"mensajeError"]],template:function(e,n){1&e&&(b.Nb(0,"ion-header"),b.Nb(1,"ion-toolbar"),b.Nb(2,"ion-buttons"),b.nc(3,d,1,0,"ion-back-button",0),b.Nb(4,"ion-title"),b.pc(5,"Modificar veterinaria"),b.Mb(),b.nc(6,u,1,1,"ion-toggle",1),b.Mb(),b.Mb(),b.Mb(),b.Nb(7,"ion-content"),b.Nb(8,"ion-grid",2),b.nc(9,p,5,0,"ion-row",3),b.Nb(10,"ion-row"),b.Nb(11,"ion-col",4),b.nc(12,N,9,5,"div",5),b.Mb(),b.Nb(13,"ion-col",6),b.nc(14,w,38,8,"form",7),b.Lb(15,"input",8,9),b.Zb(17,"async"),b.Mb(),b.Mb(),b.Mb(),b.Mb()),2&e&&(b.Ab(3),b.ec("ngIf",n.veterinaria),b.Ab(3),b.ec("ngIf",n.imagen),b.Ab(3),b.ec("ngIf",!n.veterinaria),b.Ab(3),b.ec("ngIf",n.imagen),b.Ab(2),b.ec("ngIf",n.imagen),b.Ab(1),b.ec("value",b.ac(17,6,n.urlImage)))},directives:[r.w,r.Y,r.i,i.m,r.W,r.r,r.v,r.J,r.q,r.f,r.g,r.X,r.c,r.Q,m.a,r.H,t.k,t.h,t.c,r.E,r.F,r.z,r.D,r.y,r.fb,t.g,t.b,r.U,r.h],pipes:[i.b],styles:["*[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.container-imagen[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column}.fileUpload[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin:10px}.fileUpload[_ngcontent-%COMP%]   input.upload[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0;filter:alpha(opacity=0)}.botonImagen[_ngcontent-%COMP%]{padding:10px;background-color:var(--ion-color-tertiary);border-radius:5px}.botonImagen[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:500}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;height:300px}.mensajeError[_ngcontent-%COMP%]{color:red;padding:10px;border-radius:10px}"]}),e})()}];let E=(()=>{class e{}return e.\u0275mod=b.Ib({type:e}),e.\u0275inj=b.Hb({factory:function(n){return new(n||e)},imports:[[a.i.forChild(L)],a.i]}),e})();var Y=o("ChPG");let k=(()=>{class e{}return e.\u0275mod=b.Ib({type:e}),e.\u0275inj=b.Hb({factory:function(n){return new(n||e)},imports:[[i.c,t.d,r.Z,g.b,E,t.i,Y.a]]}),e})()}}]);