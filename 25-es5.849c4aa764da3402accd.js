function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{SFYB:function(e,n,t){"use strict";t.r(n),t.d(n,"ModanuncioPageModule",(function(){return P}));var o=t("ofXK"),i=t("3Pt+"),a=t("TEn/"),r=t("tyNb"),c=t("mrSG"),s=t("nYR2"),u=t("fXoL"),l=t("OqH9"),b=t("Vaw3"),f=t("x6dk"),g=["ImageAnuncio"];function d(e,n){if(1&e&&u.Lb(0,"ion-back-button",13),2&e){var t=u.Yb();u.gc("defaultHref","/tabs/misanuncios/",t.codvet,"")}}function p(e,n){if(1&e){var t=u.Ob();u.Nb(0,"ion-toggle",14),u.Vb("ionChange",(function(e){u.kc(t);var n=u.Yb();return n.cambiarEstado(e,n.codanuncio)})),u.Mb()}if(2&e){var o=u.Yb();u.ec("checked",o.estado)}}function m(e,n){if(1&e&&u.Lb(0,"img",15),2&e){var t=u.Yb();u.ec("src",t.imagen,u.lc)}}function h(e,n){if(1&e&&(u.Lb(0,"img",16),u.Zb(1,"async")),2&e){var t=u.Yb();u.ec("src",u.ac(1,1,t.urlImage),u.lc)}}function v(e,n){if(1&e&&(u.Lb(0,"ion-progress-bar",17),u.Zb(1,"async")),2&e){var t=u.Yb();u.ec("value",u.ac(1,1,t.uploadPercent))}}function M(e,n){if(1&e&&(u.Nb(0,"small",24),u.pc(1),u.Mb()),2&e){var t=u.Yb(2);u.Ab(1),u.qc(t.getError("titulo"))}}function C(e,n){if(1&e&&(u.Nb(0,"small",24),u.pc(1),u.Mb()),2&e){var t=u.Yb(2);u.Ab(1),u.qc(t.getError("texto"))}}function y(e,n){if(1&e){var t=u.Ob();u.Nb(0,"form",18),u.Nb(1,"ion-list"),u.Nb(2,"ion-list-header"),u.Nb(3,"h3"),u.pc(4,"Modificar Anuncio"),u.Mb(),u.Mb(),u.Nb(5,"ion-item"),u.Nb(6,"ion-label",19),u.pc(7,"Titulo"),u.Mb(),u.Lb(8,"ion-input",20),u.Mb(),u.nc(9,M,2,1,"small",21),u.Nb(10,"ion-item"),u.Nb(11,"ion-label",19),u.pc(12,"Detalle"),u.Mb(),u.Lb(13,"ion-textarea",22),u.Mb(),u.nc(14,C,2,1,"small",21),u.Lb(15,"br"),u.Nb(16,"ion-button",23),u.Vb("click",(function(){return u.kc(t),u.Yb().actualizar()})),u.pc(17," Actualizar "),u.Mb(),u.Mb(),u.Mb()}if(2&e){var o=u.Yb();u.ec("formGroup",o.formulario),u.Ab(9),u.ec("ngIf",o.formulario.get("titulo").touched),u.Ab(5),u.ec("ngIf",o.formulario.get("texto").touched),u.Ab(2),u.ec("disabled",o.formulario.invalid)}}var I,k,N,w=[{path:"",component:(I=function(){function e(n,t,o,i,a,r){_classCallCheck(this,e),this.route=n,this.anuncio=t,this.toastController=o,this.fb=i,this.router=a,this.storage=r,this.fechamod=new Date,this.codanuncio=Number(this.route.snapshot.paramMap.get("codanuncio"))}return _createClass(e,[{key:"ionViewWillEnter",value:function(){this.formInit()}},{key:"formInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.anuncio.getAnuncioByCodanuncio(this.codanuncio);case 2:n=e.sent,this.codvet=n[0].codvet,this.estado=n[0].estado,this.imagen=n[0].imganuncio,this.formulario=this.fb.group({titulo:[n[0].titulo,[i.j.required,i.j.maxLength(100)]],texto:[n[0].texto,[i.j.required,i.j.maxLength(500)]]});case 4:case"end":return e.stop()}}),e,this)})))}},{key:"cambiarEstado",value:function(e,n){var t=this;this.anuncio.CambiarEsatdoAnuncio({codanuncio:n,estado:e.detail.checked}).then((function(e){t.Mensaje(e.mensaje)}))}},{key:"actualizar",value:function(){var e=this,n=this.formulario.value;n.codanuncio=this.codanuncio,n.fechamod=this.fechamod,n.imagen=this.imagenAnuncio.nativeElement.value,""==n.imagen&&(n.imagen=this.imagen),this.anuncio.actualizaranuncio(n).then((function(n){e.Mensaje(n.mensaje),e.router.navigate(["/tabs/misanuncios/".concat(e.codvet)])}))}},{key:"Mensaje",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.toastController.create({message:e,duration:2e3});case 2:n.sent.present();case 3:case"end":return n.stop()}}),n,this)})))}},{key:"uploadFile",value:function(e){var n=this;if(e.target.files[0].size/1024>3e3)this.Mensaje("Imagen Demaciado grande");else{var t=Math.random().toString(36).substring(2),o=e.target.files[0],i="/anuncios/img_".concat(t),a=this.storage.ref(i),r=this.storage.upload(i,o);this.uploadPercent=r.percentageChanges(),r.snapshotChanges().pipe(Object(s.a)((function(){return n.urlImage=a.getDownloadURL()}))).subscribe()}}},{key:"getError",value:function(e){var n;return this.formulario.get(e).hasError("required")?n="campo requerido":this.formulario.get(e).hasError("maxlength")&&("titulo"==e?n="el titulo no debe pasar de 100 caracteres":"texto"==e&&(n="el texto no debe pasar de 500 caracteres")),n}}]),e}(),I.\u0275fac=function(e){return new(e||I)(u.Kb(r.a),u.Kb(l.a),u.Kb(a.gb),u.Kb(i.a),u.Kb(r.g),u.Kb(b.a))},I.\u0275cmp=u.Eb({type:I,selectors:[["app-modanuncio"]],viewQuery:function(e,n){var t;1&e&&u.uc(g,!0),2&e&&u.ic(t=u.Wb())&&(n.imagenAnuncio=t.first)},decls:25,vars:11,consts:[[3,"defaultHref",4,"ngIf"],["slot","end",3,"checked","ionChange",4,"ngIf"],["fixed",""],["size","12","size-lg","6"],[1,"container-imagen"],["appImagen","","alt","imagen de anuncio",3,"src",4,"ngIf"],["alt","usuario",3,"src",4,"ngIf"],[3,"value",4,"ngIf"],[1,"fileUpload","botonImagen"],["type","file","size","3000","accept",".png, .jpg",1,"upload",3,"change"],[3,"formGroup",4,"ngIf"],["type","hidden",3,"value"],["ImageAnuncio",""],[3,"defaultHref"],["slot","end",3,"checked","ionChange"],["appImagen","","alt","imagen de anuncio",3,"src"],["alt","usuario",3,"src"],[3,"value"],[3,"formGroup"],["position","floating"],["formControlName","titulo"],["class","mensajeError",4,"ngIf"],["formControlName","texto","autoGrow","true"],["shape","round","size","block",3,"disabled","click"],[1,"mensajeError"]],template:function(e,n){1&e&&(u.Nb(0,"ion-header"),u.Nb(1,"ion-toolbar"),u.Nb(2,"ion-buttons"),u.nc(3,d,1,1,"ion-back-button",0),u.Nb(4,"ion-title"),u.pc(5,"Modificar anuncio"),u.Mb(),u.nc(6,p,1,1,"ion-toggle",1),u.Mb(),u.Mb(),u.Mb(),u.Nb(7,"ion-content"),u.Nb(8,"ion-grid",2),u.Nb(9,"ion-row"),u.Nb(10,"ion-col",3),u.Nb(11,"div",4),u.nc(12,m,1,1,"img",5),u.nc(13,h,2,3,"img",6),u.Zb(14,"async"),u.nc(15,v,2,3,"ion-progress-bar",7),u.Nb(16,"div",8),u.Nb(17,"span"),u.pc(18,"Modificar Imagen"),u.Mb(),u.Nb(19,"input",9),u.Vb("change",(function(e){return n.uploadFile(e)})),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(20,"ion-col",3),u.nc(21,y,18,4,"form",10),u.Lb(22,"input",11,12),u.Zb(24,"async"),u.Mb(),u.Mb(),u.Mb(),u.Mb()),2&e&&(u.Ab(3),u.ec("ngIf",n.codvet),u.Ab(3),u.ec("ngIf",n.codvet),u.Ab(6),u.ec("ngIf",!n.urlImage),u.Ab(1),u.ec("ngIf",u.ac(14,7,n.urlImage)),u.Ab(2),u.ec("ngIf",n.uploadPercent),u.Ab(6),u.ec("ngIf",n.codvet),u.Ab(1),u.ec("value",u.ac(24,9,n.urlImage)))},directives:[a.w,a.Y,a.i,o.m,a.W,a.r,a.v,a.J,a.q,a.f,a.g,a.X,a.c,f.a,a.H,i.k,i.h,i.c,a.E,a.F,a.z,a.D,a.y,a.fb,i.g,i.b,a.U,a.h],pipes:[o.b],styles:["*[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.container-imagen[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column}.container-imagen[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:100%;height:350px;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center;border:2px solid #f3f2f2;padding:2px}.fileUpload[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin:10px}.fileUpload[_ngcontent-%COMP%]   input.upload[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0;filter:alpha(opacity=0)}.botonImagen[_ngcontent-%COMP%]{padding:10px;background-color:var(--ion-color-tertiary);border-radius:5px}.botonImagen[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:500}.mensajeError[_ngcontent-%COMP%]{color:red;padding:10px;border-radius:10px}"]}),I)}],x=((k=function e(){_classCallCheck(this,e)}).\u0275mod=u.Ib({type:k}),k.\u0275inj=u.Hb({factory:function(e){return new(e||k)},imports:[[r.i.forChild(w)],r.i]}),k),j=t("ChPG"),P=((N=function e(){_classCallCheck(this,e)}).\u0275mod=u.Ib({type:N}),N.\u0275inj=u.Hb({factory:function(e){return new(e||N)},imports:[[o.c,i.d,a.Z,x,i.i,j.a]]}),N)}}]);